@model askLNU.ViewModels.QuestionViewModel

@{
    ViewData["Title"] = Model.Title;
}

<div class="row">
    <div class="col-1 flex-column mt-3 p-0">
        <div class="text-center">
            <form asp-controller="Question" asp-action="VoteUp" method="post">
                <input type="hidden" value="@Model.Id" name="questionId"/>
                <button type="submit" class="fas fa-chevron-up fa-2x"></button>
            </form>
        </div>
        <div class="text-center">@Model.Rating</div>
        <div class="text-center">
            <form asp-controller="Question" asp-action="VoteDown" method="post">
                <input type="hidden" value="@Model.Id" name="questionId" />
                <button type="submit" class="fas fa-chevron-down fa-2x"></button>
            </form>
        </div>
    </div>

    <div class="col-8">
        <div class="card">
            <div class="card-body">
                <h2 class="card-title">
                    @Model.Title
                    <small class="text-muted" id="question-id">#@Model.Id</small>
                </h2>
                <p class="card-text">@Model.Text</p>
            </div>
        </div>

        <form asp-action="AddAnswer" asp-controller="Question" method="post" class="mt-3">
            <div class="form-group">
                <textarea name="answerText" class="form-control" rows="5" style="resize: none;"></textarea>
                <input type="hidden" value="@Model.Id" name="questionId" />
            </div>
            <div class="form-group">
                <input type="submit" value="Send" class="btn btn-primary" />
            </div>
        </form>

        <div>
            @foreach (var answer in Model.Answers.OrderByDescending(a => a.Date))
            {
                <div class="card mt-3">
                    <div class="card-body">
                        <p class="card-text">
                            @answer.Text
                        </p>
                    </div>
                    <div class="card-footer">
                        <strong>@answer.AuthorName</strong>
                        <p>@answer.Date.ToShortDateString()</p>
                    </div>
                </div>
            }
        </div>
    </div>

    <div class="col-3">
        <div class="media">
            <img src="@Model.Author.ImageSrc" class="mr-3" width="64">
            <div class="media-body">
                <h5 class="mt-0">@Model.Author.UserName</h5>
                @Model.Date.ToShortDateString()
            </div>
        </div>

        <div class="mt-3">
            @foreach (var tag in Model.Tags)
            {
                <p class="btn btn-sm btn-dark mb-1">@tag</p>
                <br />
            }
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
